name: "⚙️ Prep updates"

on:
  workflow_dispatch: null

jobs:
  prep-updates:
    name: "${{ matrix.commit-title }}"

    permissions:
      actions: write
      artifact-metadata: write
      attestations: write
      checks: write
      contents: "write"
      deployments: write
      discussions: write
      id-token: write
      issues: write
      models: read
      packages: write
      pages: write
      pull-requests: "write"
      security-events: write
      statuses: write

    strategy:
      matrix:
        include:
          - tox-label-create-changes: "update"
            commit-title: "Update project"
            pr-title: "Update project"
            pr-body-input-format: "gfm"
            pr-body: |
              _Updates auto-generated with `tox run -m update`._

    uses: "./.github/workflows/create-pr.yaml"
    with:
      config: "${{ toJSON(matrix) }}"
